<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Savi - Your supportive digital companion for payments">
    <title>{% block title %}Savi - Payment Assistant{% endblock %}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts - Poppins & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        /* Savi Design System Tokens */
        :root {
            --savi-bg: #0F2B1D;
            --savi-gradient-start: #C137A2;
            --savi-gradient-end: #FF6A00;
            --savi-white: #FFFFFF;
            --savi-black: #000000;
            --savi-accent: #A020F0;
        }
        
        .font-display { font-family: 'Poppins', sans-serif; }
        .font-body { font-family: 'Inter', sans-serif; }
        
        .savi-bg { background-color: var(--savi-bg); }
        .savi-gradient { background: linear-gradient(180deg, #C137A2 0%, #FF6A00 100%); }
        .savi-gradient-r { background: linear-gradient(90deg, #C137A2 0%, #FF6A00 100%); }
        
        .savi-backdrop {
            background-image: url('/static/images/Savi_Backgrounds_Savi_Background 5.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .chat-bubble-bot {
            background: linear-gradient(135deg, #C137A2 0%, #FF6A00 100%);
            color: white;
        }
        
        .chat-bubble-user {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 20px rgba(193, 55, 162, 0.3); }
            100% { box-shadow: 0 0 30px rgba(255, 106, 0, 0.5); }
        }
        
        .loading-beam {
            background: linear-gradient(90deg, transparent 0%, #FF6A00 50%, transparent 100%);
            animation: loading-beam 2s linear infinite;
        }
        
        @keyframes loading-beam {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(15, 43, 29, 0.3);
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #C137A2 0%, #FF6A00 100%);
            border-radius: 3px;
        }
    </style>
    
    {% block head %}{% endblock %}
</head>
<body class="h-full savi-bg text-white font-body">
    <!-- Background wrapper -->
    <div class="min-h-full savi-backdrop">
        <div class="min-h-full bg-black bg-opacity-40">
            
            <!-- Navigation -->
            <nav class="bg-black bg-opacity-30 border-b border-white border-opacity-20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-center h-16">
                        <!-- Logo -->
                        <div class="flex items-center">
                            <a href="/" class="flex items-center space-x-3">
                                <img src="/static/images/Savi_logo_Savi_White out copy.png" alt="Savi Logo" class="h-8 w-auto">
                            </a>
                        </div>
                        
                        <!-- Navigation Links -->
                        <div class="hidden md:block">
                            <div class="ml-10 flex items-baseline space-x-4">
                                <a href="/" class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white hover:bg-opacity-10 transition-colors">
                                    Dashboard
                                </a>
                                <a href="/chat" class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white hover:bg-opacity-10 transition-colors">
                                    Chat
                                </a>
                                <a href="#" class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white hover:bg-opacity-10 transition-colors">
                                    Contacts
                                </a>
                                <a href="#" class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white hover:bg-opacity-10 transition-colors">
                                    Payments
                                </a>
                            </div>
                        </div>
                        
                        <!-- Mobile menu button -->
                        <div class="md:hidden">
                            <button type="button" class="bg-white bg-opacity-10 inline-flex items-center justify-center p-2 rounded-md text-white hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                                <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="min-h-screen pb-8">
                {% block content %}{% endblock %}
            </main>
            
            <!-- Footer -->
            <footer class="bg-black bg-opacity-50 border-t border-white border-opacity-20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4">
                            <img src="/static/images/Savi_logo_Savi_White out copy.png" alt="Savi" class="h-6 w-auto">
                            <p class="text-sm text-white opacity-80">Making payments make sense.</p>
                        </div>
                        <div class="text-sm text-white opacity-60">
                            Â© 2024 Ecommpay. All rights reserved.
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    
    <!-- Base JavaScript -->
    <script>
        // Savi interaction helpers
        window.Savi = {
            logInteraction: function(type, content, contactId = null) {
                fetch('/api/crm/interactions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: type,
                        content: content,
                        contact_id: contactId
                    })
                })
                .then(response => response.json())
                .then(data => console.log('Interaction logged:', data))
                .catch(error => console.error('Error logging interaction:', error));
            },
            
            showNotification: function(message, type = 'info') {
                // Simple notification system
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                    type === 'success' ? 'bg-green-600' : 
                    type === 'error' ? 'bg-red-600' : 
                    'savi-gradient'
                } text-white`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        };
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
